@import '~@payloadcms/ui/scss';

@layer payload-default {
  .seat-maker {
    width: 100%;
    background: var(--theme-elevation-0);
    border: 1px solid var(--theme-border-color);
    border-radius: var(--style-radius-m);
    font-family: var(--font-body);

    &__header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: calc(var(--base) * 0.75) var(--base);
      border-bottom: 1px solid var(--theme-border-color);
      background: var(--theme-elevation-50);
    }

    &__title {
      display: flex;
      align-items: center;
      gap: calc(var(--base) * 0.5);
      font-size: calc(var(--base) * 0.9);
      font-weight: 600;
      color: var(--theme-text);

      svg {
        color: var(--theme-success-500);
        width: calc(var(--base) * 1.25);
        height: calc(var(--base) * 1.25);
      }
    }

    &__stats {
      font-size: calc(var(--base) * 0.75);
      color: var(--theme-elevation-600);

      strong {
        color: var(--theme-text);
        font-weight: 600;
      }
    }

    &__toolbar {
      display: flex;
      align-items: center;
      gap: calc(var(--base) * 0.5);
      padding: calc(var(--base) * 0.75) var(--base);
      background: var(--theme-elevation-0);
      border-bottom: 1px solid var(--theme-border-color);
      flex-wrap: wrap;
    }

    &__btn {
      display: inline-flex;
      align-items: center;
      gap: calc(var(--base) * 0.375);
      padding: calc(var(--base) * 0.375) calc(var(--base) * 0.75);
      background: var(--theme-bg);
      border: 1px solid var(--theme-elevation-150);
      border-radius: var(--style-radius-s);
      font-size: calc(var(--base) * 0.75);
      font-weight: 500;
      cursor: pointer;
      transition: all 150ms ease;
      font-family: var(--font-body);

      &:hover:not(:disabled) {
        background: var(--theme-elevation-50);
        border-color: var(--theme-elevation-300);
        transform: translateY(-1px);
      }

      &:active:not(:disabled) {
        transform: translateY(0);
      }

      &:disabled {
        opacity: 0.4;
        cursor: not-allowed;
      }

      &--danger {
        color: var(--theme-error-500);
        border-color: var(--theme-error-200);

        &:hover:not(:disabled) {
          background: var(--theme-error-50);
          border-color: var(--theme-error-400);
          color: var(--theme-error-600);
        }
      }

      svg {
        width: var(--base);
        height: var(--base);
      }
    }

    &__divider {
      width: 1px;
      height: calc(var(--base) * 1.5);
      background: var(--theme-elevation-200);
      margin: 0 calc(var(--base) * 0.25);
    }

    &__content {
      display: grid;
      grid-template-columns: 240px 1fr;
      min-height: 500px;

      @include small-break {
        grid-template-columns: 1fr;
      }
    }

    &__sidebar {
      padding: var(--base);
      background: var(--theme-elevation-50);
      border-right: 1px solid var(--theme-border-color);

      @include small-break {
        border-right: none;
        border-bottom: 1px solid var(--theme-border-color);
      }
    }

    &__section {
      margin-bottom: calc(var(--base) * 1.5);

      &:last-child {
        margin-bottom: 0;
      }

      h4 {
        margin: 0 0 calc(var(--base) * 0.75) 0;
        text-transform: uppercase;
        font-size: calc(var(--base) * 0.625);
        letter-spacing: 0.5px;
        color: var(--theme-elevation-600);
        font-weight: 600;
      }
    }

    &__tools {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: calc(var(--base) * 0.5);
    }

    &__tool {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: calc(var(--base) * 0.25);
      padding: calc(var(--base) * 0.75);
      background: var(--theme-bg);
      border: 2px solid var(--theme-elevation-150);
      border-radius: var(--style-radius-s);
      cursor: pointer;
      transition: all 150ms ease;
      font-family: var(--font-body);

      &:hover {
        border-color: var(--theme-success-400);
        background: var(--theme-success-50);
        transform: translateY(-2px);
      }

      &--active {
        border-color: var(--theme-success-500);
        background: var(--theme-success-100);
        color: var(--theme-success-700);
      }

      svg {
        color: var(--theme-elevation-600);
        width: calc(var(--base) * 1.125);
        height: calc(var(--base) * 1.125);
      }

      span {
        font-size: calc(var(--base) * 0.625);
        font-weight: 500;
        color: var(--theme-elevation-700);
      }

      &:hover svg,
      &:hover span {
        color: var(--theme-success-600);
      }

      &--active svg,
      &--active span {
        color: var(--theme-success-700);
      }
    }

    &__size-controls {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: calc(var(--base) * 0.5);
    }

    &__size-input {
      label {
        display: block;
        margin-bottom: calc(var(--base) * 0.25);
        font-size: calc(var(--base) * 0.625);
        color: var(--theme-elevation-600);
        font-weight: 500;
      }

      input {
        @include formInput();
        width: 100%;
        padding: calc(var(--base) * 0.375) calc(var(--base) * 0.5);
        font-size: calc(var(--base) * 0.75);
        height: auto;
        line-height: 1.5;
      }
    }

    &__hint {
      margin-top: calc(var(--base) * 0.5);
      color: var(--theme-elevation-500);
      font-style: italic;
      font-size: calc(var(--base) * 0.625);
    }

    &__tips {
      ul {
        margin: 0;
        padding-left: var(--base);
        li {
          font-size: calc(var(--base) * 0.625);
          color: var(--theme-elevation-600);
          line-height: 1.6;
          + li {
            margin-top: calc(var(--base) * 0.25);
          }
        }
      }
    }

    &__grid-container {
      padding: var(--base);
      overflow: auto;
      background: var(--theme-elevation-0);
      position: relative;
      min-height: 400px;
    }

    &__grid {
      display: grid;
      gap: 2px;
      padding: var(--base);
      background: var(--theme-elevation-100);
      border: 1px solid var(--theme-border-color);
      border-radius: var(--style-radius-m);
      position: relative;
      width: fit-content;
      margin: 0 auto;
      min-height: 350px;
      user-select: none;
    }

    &__cell {
      background: var(--theme-bg);
      border: 1px solid var(--theme-elevation-150);
      cursor: pointer;
      transition: all 150ms ease;
      position: relative;
      min-width: 0;
      min-height: 0;

      &:hover {
        background: var(--theme-elevation-50);
        border-color: var(--theme-elevation-300);
      }
    }

    &__element {
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: calc(var(--base) * 0.125);
      padding: calc(var(--base) * 0.375);
      border-radius: var(--style-radius-s);
      cursor: move;
      transition: all 150ms ease;
      user-select: none;
      font-size: calc(var(--base) * 0.75);
      font-weight: 600;
      border: 2px solid;
      overflow: hidden;
      z-index: 1;

      &:hover {
        transform: scale(1.02);
        z-index: 10;
        box-shadow: 0 4px 8px -3px rgba(0, 0, 0, 0.1);
      }

      &--seat {
        background: var(--theme-success-100);
        border-color: var(--theme-success-400);
        color: var(--theme-success-800);

        &:hover {
          background: var(--theme-success-150);
          border-color: var(--theme-success-500);
        }

        &.seat-maker__element--disabled {
          background: var(--theme-elevation-100);
          border-color: var(--theme-elevation-400);
          color: var(--theme-elevation-600);
          opacity: 0.7;
          &::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 10%;
            right: 10%;
            height: 2px;
            background: var(--theme-error-500);
            transform: rotate(-45deg);
          }
        }
      }

      &--wc {
        background: var(--theme-warning-100);
        border-color: var(--theme-warning-400);
        color: var(--theme-warning-800);

        &:hover {
          background: var(--theme-warning-150);
          border-color: var(--theme-warning-500);
        }
      }

      &--driver {
        background: var(--color-blue-100);
        border-color: var(--color-blue-400);
        color: var(--color-blue-800);

        &:hover {
          background: var(--color-blue-150);
          border-color: var(--color-blue-500);
        }
      }

      &--door {
        background: var(--theme-elevation-100);
        border-color: var(--theme-elevation-400);
        color: var(--theme-elevation-800);

        &:hover {
          background: var(--theme-elevation-150);
          border-color: var(--theme-elevation-500);
        }
      }

      &--selected {
        box-shadow: 0 0 0 3px var(--theme-success-300);
        border-color: var(--theme-success-600) !important;
        z-index: 5;
      }

      &--dragging {
        opacity: 0.3;
        pointer-events: none;
        cursor: grabbing;
      }

      svg {
        width: calc(var(--base) * 0.8);
        height: calc(var(--base) * 0.8);
      }

      &-label {
        font-size: calc(var(--base) * 0.55);
        font-weight: 600;
        white-space: nowrap;
        overflow: hidden;
        text-align: center;
        line-height: 1;
      }

      &-input {
        @include formInput();
        width: 100%;
        max-width: 50px;
        padding: calc(var(--base) * 0.125) calc(var(--base) * 0.25);
        border: 1px solid var(--theme-success-500);
        font-size: calc(var(--base) * 0.625);
        font-weight: 600;
        text-align: center;
        &:focus {
          outline: none;
          box-shadow: 0 0 0 2px var(--theme-success-300);
        }
      }
    }

    &__preview {
      background: var(--theme-success-200);
      border: 2px dashed var(--theme-success-500);
      border-radius: var(--style-radius-s);
      opacity: 0.5;
      pointer-events: none;
      z-index: 20;
    }

    &:focus-within {
      outline: 2px solid var(--theme-success-500);
      outline-offset: 2px;
    }

    @media (prefers-contrast: high) {
      &__element {
        border-width: 3px;
        font-weight: 700;
        &--selected {
          box-shadow: 0 0 0 4px var(--theme-text);
        }
      }
    }

    @media (prefers-reduced-motion: reduce) {
      * {
        transition: none !important;
        animation: none !important;
      }
    }

    html[data-theme='dark'] & {
      &__element {
        &--seat {
          &.seat-maker__element--disabled {
            &::after {
              background: var(--theme-error-400);
            }
          }
        }
        &--driver {
          background: var(--color-blue-800);
          border-color: var(--color-blue-600);
          color: var(--color-blue-200);

          &:hover {
            background: var(--color-blue-700);
            border-color: var(--color-blue-500);
          }
        }
      }
    }

    @include extra-small-break {
      &__grid-container {
        padding: calc(var(--base) * 0.75);
      }
      &__grid {
        gap: 1px;
        padding: calc(var(--base) * 0.5);
      }
      &__element {
        padding: calc(var(--base) * 0.25);
        svg {
          width: calc(var(--base) * 0.875);
          height: calc(var(--base) * 0.875);
        }
        &-label {
          font-size: calc(var(--base) * 0.5);
        }
      }
    }
  }
}
